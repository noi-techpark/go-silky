# Test: OAuth2 Password Grant Flow
# This test verifies OAuth2 password flow where user credentials are exchanged for an access token
# The authenticator automatically obtains and caches the token, refreshing when expired

rootContext: []

# OAuth2 with password grant type
auth:
  type: oauth
  method: password
  tokenUrl: https://oauth.example.com/token
  username: user@example.com
  password: secure_password
  scopes: [read, write, admin]

steps:
  - type: request
    name: "Fetch user profile"
    request:
      url: https://api.example.com/me/profile
      method: GET
    resultTransformer: .profile
    mergeOn: ". += [$res]"
